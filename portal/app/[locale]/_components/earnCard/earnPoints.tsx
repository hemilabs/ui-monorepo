import Image, { StaticImageData } from 'next/image'
import { Locale, useLocale } from 'next-intl'
import { type MouseEvent } from 'react'

import EarnPointsEn from './_images/earnPointsEn.png'
import EarnPointsEs from './_images/earnPointsEs.png'
import EarnPointsPt from './_images/earnPointsPt.png'

const imageMap: Record<Locale, StaticImageData> = {
  en: EarnPointsEn,
  es: EarnPointsEs,
  pt: EarnPointsPt,
}

const PoweredAbsinthe = () => (
  <svg height={10} width={101} xmlns="http://www.w3.org/2000/svg">
    <defs>
      <clipPath id="clipPath-96d3f8e2">
        <path d="M96 3h4.598v5H96Zm0 0" />
      </clipPath>
      <clipPath id="clipPath-57a9c2b1">
        <path d="M57 3h7v5.89h-7Zm0 0" />
      </clipPath>
      <clipPath id="clipPath-52e4d7f3">
        <path d="M52.164 0H59v8.89h-6.836Zm0 0" />
      </clipPath>
      <clipPath id="clipPath-53b8a9e6">
        <path d="M53 0h11v8.89H53Zm0 0" />
      </clipPath>
      <clipPath id="clipPath-58c7f4d2">
        <path d="M58 2h6v6.89h-6Zm0 0" />
      </clipPath>
      <clipPath id="clipPath-52f9e1c8">
        <path d="M52.164 0h48.434v8.89H52.164Zm0 0" />
      </clipPath>
      <clipPath id="clipPath-0a1b2c3d">
        <path d="M0 0h101v10H0z" />
      </clipPath>
      <clipPath id="clipPath-0e4f7a9b">
        <path d="M0 0h101v10H0z" />
      </clipPath>
      <mask id="mask-0d9c3e5f">
        <g filter="url(#filter-1b2a8c7d)">
          <path
            d="M0 0h101v10H0z"
            style={{
              fill: '#000',
              fillOpacity: 0.2,
              stroke: 'none',
            }}
          />
        </g>
      </mask>
      <mask id="mask-2f8e6b4a">
        <g filter="url(#filter-1b2a8c7d)">
          <path
            d="M0 0h101v10H0z"
            style={{
              fill: '#000',
              fillOpacity: 0.14902,
              stroke: 'none',
            }}
          />
        </g>
      </mask>
      <g clipPath="url(#clipPath-0a1b2c3d)" id="group-3c9d5e2f">
        <path
          d="M60.59 2.672a.47.47 0 0 0-.813.008L58.7 4.547a.458.458 0 0 0-.578.191l1.3-2.254a.611.611 0 0 1 1.052-.015Zm0 0"
          style={{
            fill: '#00002d',
            fillOpacity: 1,
            fillRule: 'nonzero',
            stroke: 'none',
          }}
        />
      </g>
      <g clipPath="url(#clipPath-0e4f7a9b)" id="group-4a7b8d1e">
        <path
          d="m58.52.195-4.79 8.336a.635.635 0 0 1-.18-.832l1.25-2.172 2.72-4.71.039-.07a1.098 1.098 0 0 1 .96-.552Zm0 0"
          style={{
            fill: '#0a0a0a',
            fillOpacity: 1,
            fillRule: 'nonzero',
            stroke: 'none',
          }}
        />
      </g>
      <filter
        filterUnits="objectBoundingBox"
        height="100%"
        id="filter-1b2a8c7d"
        width="100%"
        x="0%"
        y="0%"
      >
        <feColorMatrix
          in="SourceGraphic"
          values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0"
        />
      </filter>
    </defs>
    <path
      d="M.648 7.777V1.312h2.418c.493 0 .91.09 1.247.278.34.183.593.437.769.762.172.32.258.687.258 1.097 0 .414-.086.781-.262 1.106-.176.32-.433.574-.773.758-.34.183-.758.277-1.258.277H1.449v-.953h1.446c.292 0 .53-.051.718-.153a.93.93 0 0 0 .41-.421c.09-.18.133-.383.133-.614 0-.226-.043-.43-.133-.605a.914.914 0 0 0-.41-.414c-.191-.098-.43-.149-.726-.149H1.809v5.496Zm7.54.102c-.473 0-.883-.106-1.231-.313a2.163 2.163 0 0 1-.805-.878c-.187-.375-.28-.813-.28-1.31 0-.503.093-.944.28-1.32.192-.378.461-.671.805-.882.348-.207.758-.313 1.23-.313.473 0 .883.106 1.231.313.348.21.613.504.8.883.192.375.286.816.286 1.32 0 .496-.094.934-.285 1.309a2.102 2.102 0 0 1-.801.878c-.348.207-.758.313-1.23.313Zm0-.918c.261 0 .48-.07.652-.211.176-.145.308-.332.39-.574.086-.239.13-.508.13-.801 0-.3-.044-.57-.13-.809a1.238 1.238 0 0 0-.39-.574.999.999 0 0 0-.652-.21c-.266 0-.485.07-.657.21-.172.145-.3.332-.386.574a2.475 2.475 0 0 0-.125.809c0 .293.043.563.125.8.085.243.214.43.386.575.172.14.39.21.657.21Zm4.027.816L10.77 2.926h1.187l.477 1.902c.074.313.152.652.238 1.027.086.372.172.79.25 1.247h-.145c.078-.446.16-.856.25-1.23.09-.376.176-.724.258-1.044l.488-1.902h1.075l.48 1.902c.078.313.16.66.246 1.035.09.375.176.785.254 1.239h-.14a29.376 29.376 0 0 1 .48-2.274l.477-1.902h1.195l-1.445 4.851h-1.141l-.57-1.98c-.059-.2-.114-.41-.168-.64-.055-.231-.11-.462-.16-.7-.051-.238-.106-.469-.157-.691h.207c-.05.222-.105.453-.16.691-.05.238-.105.473-.16.703-.05.23-.106.445-.164.637l-.567 1.98Zm8.246.102c-.488 0-.91-.106-1.262-.309a2.098 2.098 0 0 1-.812-.867c-.188-.375-.282-.816-.282-1.32 0-.5.094-.942.278-1.317.187-.375.453-.668.793-.878.344-.215.746-.325 1.21-.325.294 0 .575.051.84.145.27.094.508.242.712.441.207.2.37.457.484.766.121.305.18.672.18 1.098v.355H18.64v-.77h3.402l-.531.227c0-.27-.04-.512-.125-.715a1.05 1.05 0 0 0-.375-.488 1.078 1.078 0 0 0-.621-.172c-.25 0-.461.059-.633.18a1.09 1.09 0 0 0-.399.468c-.09.192-.136.41-.136.649v.531c0 .305.054.567.156.777.105.211.25.368.437.477.192.106.407.16.657.16.164 0 .312-.023.445-.07a.994.994 0 0 0 .352-.211.95.95 0 0 0 .222-.348l1.035.211a1.67 1.67 0 0 1-.398.688 1.959 1.959 0 0 1-.707.457c-.281.105-.602.16-.961.16Zm2.934-.102V2.926h1.093v.812h.051c.086-.281.238-.496.457-.648.215-.152.461-.23.738-.23.067 0 .137.003.215.007.078.008.145.016.2.024V3.93a2.727 2.727 0 0 0-.535-.059c-.208 0-.395.047-.563.137-.164.09-.293.21-.39.37-.09.157-.138.337-.138.544v2.855Zm5.304.102c-.488 0-.91-.106-1.262-.309a2.098 2.098 0 0 1-.812-.867c-.188-.375-.281-.816-.281-1.32 0-.5.093-.942.277-1.317.188-.375.453-.668.793-.878.344-.215.746-.325 1.211-.325.293 0 .574.051.84.145.27.094.508.242.71.441.208.2.372.457.485.766.121.305.18.672.18 1.098v.355h-3.965v-.77h3.406l-.531.227c0-.27-.04-.512-.125-.715a1.077 1.077 0 0 0-.375-.488 1.086 1.086 0 0 0-.621-.172c-.25 0-.461.059-.633.18-.176.113-.308.27-.398.468-.09.192-.137.41-.137.649v.531c0 .305.055.567.156.777.106.211.25.368.438.477.187.106.406.16.656.16.164 0 .312-.023.445-.07a.994.994 0 0 0 .352-.211.95.95 0 0 0 .222-.348l1.036.211a1.67 1.67 0 0 1-.399.688 1.993 1.993 0 0 1-.707.457c-.281.105-.601.16-.96.16Zm4.719-.016c-.379 0-.723-.093-1.027-.289-.301-.195-.536-.48-.711-.855-.172-.375-.258-.824-.258-1.36 0-.539.086-.992.262-1.363.18-.371.421-.652.722-.844.301-.191.637-.289 1.008-.289.29 0 .523.051.707.149.184.097.332.21.438.343.109.133.191.258.246.372h.05V1.313h1.125v6.464h-1.105v-.77h-.07c-.055.118-.14.243-.254.376-.11.133-.254.246-.438.344-.183.09-.414.136-.695.136Zm.309-.926c.246 0 .453-.066.625-.195.171-.137.3-.32.39-.558.09-.235.133-.512.133-.829 0-.316-.043-.59-.133-.82a1.17 1.17 0 0 0-.39-.547 1.01 1.01 0 0 0-.625-.195c-.254 0-.465.07-.637.203a1.2 1.2 0 0 0-.387.559c-.086.234-.129.5-.129.8 0 .301.043.57.13.813.085.238.214.426.386.562a.997.997 0 0 0 .637.207Zm7.886.926c-.273 0-.504-.047-.687-.136a1.452 1.452 0 0 1-.446-.344 2.013 2.013 0 0 1-.25-.375h-.074v.77h-1.101V1.312h1.129v2.414h.046c.06-.114.141-.239.247-.372.109-.132.253-.246.433-.343.188-.098.422-.149.707-.149.375 0 .715.098 1.016.29.3.19.539.472.715.843.18.371.27.824.27 1.363 0 .536-.087.985-.263 1.36-.171.375-.41.66-.714.855-.301.196-.645.29-1.028.29Zm-.304-.926a.97.97 0 0 0 .632-.207c.172-.136.301-.324.387-.562a2.41 2.41 0 0 0 .133-.813c0-.3-.047-.566-.133-.8a1.188 1.188 0 0 0-.379-.559 1.013 1.013 0 0 0-.64-.203c-.246 0-.457.066-.63.195a1.22 1.22 0 0 0-.386.547c-.09.23-.133.504-.133.82 0 .317.043.594.133.829.09.238.219.421.387.558.175.13.383.196.629.196Zm2.898 2.57.266-.878.132.035c.172.043.32.055.454.035a.544.544 0 0 0 .336-.176c.09-.093.152-.234.19-.421l.071-.305-1.832-4.871h1.207l.883 2.636c.106.313.191.625.258.934.066.313.14.629.219.953h-.293c.078-.324.156-.64.234-.953.078-.312.168-.621.273-.934l.915-2.636h1.19L46.63 8.402a2.376 2.376 0 0 1-.367.66 1.471 1.471 0 0 1-.543.422c-.215.094-.465.141-.758.141-.16 0-.305-.012-.441-.031a1.29 1.29 0 0 1-.313-.086Zm0 0"
      style={{
        fill: '#a3a3a3',
        fillOpacity: 1,
        fillRule: 'nonzero',
        stroke: 'none',
      }}
    />
    <path
      d="M66.734 7.492h-1.332l2.032-5.894h1.605l2.027 5.894h-1.332l-1.472-4.547h-.047Zm-.082-2.316h3.153v.972h-3.153ZM71.7 7.492v-5.89h1.226v2.214h.035c.055-.117.133-.242.234-.363.102-.121.239-.226.403-.312.168-.082.375-.125.62-.125.321 0 .622.086.895.254.27.167.489.417.653.753.16.34.246.758.246 1.266 0 .496-.082.91-.239 1.246-.16.34-.375.598-.644.77a1.646 1.646 0 0 1-.91.258c-.239 0-.442-.40-.61-.118a1.174 1.174 0 0 1-.402-.297 1.401 1.401 0 0 1-.242-.363h-.055v.707Zm1.202-2.207c0 .262.035.492.11.688.07.195.175.347.312.457a.81.81 0 0 0 .504.16c.2 0 .367-.055.504-.164.137-.11.242-.266.316-.461.07-.195.106-.422.106-.68 0-.254-.035-.48-.106-.672a.977.977 0 0 0-.312-.457.796.796 0 0 0-.512-.164.81.81 0 0 0-.504.16.96.96 0 0 0-.312.45 1.98 1.98 0 0 0-.106.683ZM80.422 4.332l-1.121.07a.596.596 0 0 0-.121-.261.7.7 0 0 0-.246-.188.88.88 0 0 0-.368-.07.896.896 0 0 0-.48.12c-.129.083-.195.188-.195.321 0 .106.043.192.129.266.085.074.226.133.433.176l.8.16c.43.086.75.226.958.426.21.195.316.453.316.77 0 .292-.082.542-.254.765a1.646 1.646 0 0 1-.695.508 2.588 2.588 0 0 1-1.016.183c-.585 0-1.05-.125-1.398-.367a1.427 1.427 0 0 1-.61-1l1.208-.063c.035.18.125.313.265.407.137.09.317.14.535.14a.974.974 0 0 0 .52-.125c.133-.086.2-.191.2-.324a.325.325 0 0 0-.141-.273c-.09-.075-.235-.13-.422-.168l-.766-.153c-.433-.086-.754-.234-.96-.449-.212-.21-.317-.484-.317-.812 0-.286.078-.532.23-.735.156-.207.375-.367.656-.476.282-.11.61-.168.989-.168.554 0 .996.117 1.316.355.317.238.5.559.555.965ZM81.84 2.504a.661.661 0 0 1-.469-.184.58.58 0 0 1-.191-.437c0-.172.062-.317.191-.438a.645.645 0 0 1 .469-.183c.18 0 .336.062.465.183a.585.585 0 0 1 0 .875.642.642 0 0 1-.465.184Zm-.617 4.988V3.074h1.222v4.422h-1.222ZM84.578 4.934v2.554h-1.226V3.07h1.168v.782h.05c.098-.258.262-.461.493-.614.23-.152.507-.226.835-.226.309 0 .575.066.805.199.227.137.402.328.531.574.121.25.188.547.188.89v2.813h-1.227V4.895c.004-.274-.062-.48-.207-.637-.136-.153-.332-.227-.578-.227a.87.87 0 0 0-.433.106.722.722 0 0 0-.293.308c-.07.137-.106.301-.106.489ZM90.66 3.074v.922h-2.656v-.922Zm-2.055-1.058h1.227v4.117c0 .113.016.203.05.265a.29.29 0 0 0 .145.13.627.627 0 0 0 .22.035.879.879 0 0 0 .171-.016c.055-.008.102-.02.133-.024l.191.915c-.062.015-.148.039-.258.066a1.938 1.938 0 0 1-.406.047 1.834 1.834 0 0 1-.773-.117 1.062 1.062 0 0 1-.516-.422c-.125-.188-.184-.43-.184-.719ZM92.7 4.938v2.554h-1.223v-5.89h1.187v2.253h.05c.102-.261.263-.464.485-.613.223-.152.5-.222.836-.222.309 0 .574.066.805.199.23.133.41.324.535.57.129.25.191.547.191.89v2.817H94.34V4.898c.004-.273-.067-.484-.203-.636-.14-.149-.332-.227-.582-.227a.89.89 0 0 0-.442.106.773.773 0 0 0-.3.312c-.075.133-.11.297-.114.484Zm0 0"
      style={{
        fill: '#0a0a0a',
        fillOpacity: 1,
        fillRule: 'nonzero',
        stroke: 'none',
      }}
    />
    <g clipPath="url(#clipPath-96d3f8e2)">
      <path
        d="M98.469 7.578c-.457 0-.844-.094-1.172-.281a1.893 1.893 0 0 1-.758-.79c-.176-.339-.262-.741-.262-1.206 0-.457.086-.856.262-1.2.18-.34.426-.609.746-.8.32-.192.7-.29 1.133-.29.289 0 .562.048.812.141.25.09.473.235.66.418.188.188.337.418.442.7a2.8 2.8 0 0 1 .156.984v.34h-3.726v-.762h2.578a.928.928 0 0 0-.117-.469.815.815 0 0 0-.32-.32.908.908 0 0 0-.47-.117.944.944 0 0 0-.492.129.878.878 0 0 0-.336.34.993.993 0 0 0-.12.476v.723c0 .222.038.41.12.57a.925.925 0 0 0 .348.367c.149.086.324.13.531.13.137 0 .258-.02.371-.056a.766.766 0 0 0 .477-.453l1.133.075c-.059.27-.176.507-.352.71-.18.204-.406.36-.683.473a2.59 2.59 0 0 1-.961.168Zm0 0"
        style={{
          fill: '#0a0a0a',
          fillOpacity: 1,
          fillRule: 'nonzero',
          stroke: 'none',
        }}
      />
    </g>
    <g clipPath="url(#clipPath-57a9c2b1)">
      <path
        d="m63.473 8.055-1.336.539-.035.015a.66.66 0 0 1-.22.04h-1.284a.844.844 0 0 1-.727-.422l-.055-.09-1.828-3.168.453-.782a.462.462 0 0 1 .797 0l2.012 3.489c.133.226.36.379.617.414h.004c.035.004.07.008.11.008h1.285a.612.612 0 0 0 .207-.043Zm0 0"
        style={{
          fill: '#006258',
          fillOpacity: 1,
          fillRule: 'nonzero',
          stroke: 'none',
        }}
      />
    </g>
    <g clipPath="url(#clipPath-52e4d7f3)">
      <path
        d="M58.07.285c-.203.09-.386.246-.511.461l-.04.07-2.394 4.157-1.25 2.172c-.031.046-.047.097-.063.144v.004c-.097.34.118.7.461.785a.618.618 0 0 0 .149.016h1.281a.805.805 0 0 0 .274-.047l-1.329.535a.83.83 0 0 1-.324.066H53.04a.626.626 0 0 1-.492-.238v-.004a.622.622 0 0 1-.055-.703l3.692-6.402c.129-.223.316-.375.523-.465l.031-.012Zm0 0"
        style={{
          fill: '#006258',
          fillOpacity: 1,
          fillRule: 'nonzero',
          stroke: 'none',
        }}
      />
    </g>
    <g clipPath="url(#clipPath-53b8a9e6)">
      <path
        d="M63.156 8.613a.581.581 0 0 1-.215.04h-1.285a.841.841 0 0 1-.727-.422l-2.011-3.485a.458.458 0 0 0-.793-.004l-1.34 2.32-.672 1.168a.83.83 0 0 1-.441.368l-.20.007a.78.78 0 0 1-.27.043h-1.284a.624.624 0 0 1-.367-.117.635.635 0 0 1-.18-.832l1.25-2.172L57.52.817l.039-.07a1.098 1.098 0 0 1 .96-.552c.372 0 .747.184.958.555l.996 1.723 3.015 5.23a.633.633 0 0 1-.332.91Zm0 0"
        style={{
          fill: '#cfe900',
          fillOpacity: 1,
          fillRule: 'nonzero',
          stroke: 'none',
        }}
      />
    </g>
    <g clipPath="url(#clipPath-58c7f4d2)">
      <path
        d="M63.156 8.613a.67.67 0 0 1-.215.035h-1.285c-.035 0-.07 0-.105-.003h-.004a.848.848 0 0 1-.617-.415l-2.012-3.484a.458.458 0 0 0-.797-.004l1.3-2.254a.613.613 0 0 1 1.052-.015l.117.203v.004l1.691 2.93 1.203 2.09a.632.632 0 0 1-.328.913Zm0 0"
        style={{
          fill: '#799a07',
          fillOpacity: 1,
          fillRule: 'nonzero',
          stroke: 'none',
        }}
      />
    </g>
    <g clipPath="url(#clipPath-52f9e1c8)">
      <use mask="url(#mask-0d9c3e5f)" xlinkHref="#group-3c9d5e2f" />
      <use mask="url(#mask-2f8e6b4a)" xlinkHref="#group-4a7b8d1e" />
    </g>
  </svg>
)

const CloseButton = ({
  onClick,
}: {
  onClick: (e: MouseEvent<HTMLButtonElement>) => void
}) => (
  <button
    className="group/close-button pointer-events-auto absolute right-3.5 top-3 z-10 flex h-5 w-5 items-center justify-center rounded-full bg-white
    backdrop-blur-sm md:opacity-0 md:transition-opacity md:duration-300 md:group-hover/card-image:visible md:group-hover/card-image:opacity-100"
    onClick={onClick}
    type="button"
  >
    <svg
      fill="none"
      height="16"
      viewBox="0 0 16 16"
      width="16"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M5.27918 4.22082C5.137 4.08834 4.94896 4.01622 4.75465 4.01965C4.56035 4.02308 4.37497 4.10179 4.23756 4.2392C4.10014 4.37661 4.02143 4.562 4.018 4.7563C4.01457 4.9506 4.0867 5.13865 4.21918 5.28082L6.93918 8.00082L4.21918 10.7208C4.14549 10.7895 4.08639 10.8723 4.0454 10.9643C4.0044 11.0563 3.98236 11.1556 3.98059 11.2563C3.97881 11.357 3.99733 11.457 4.03505 11.5504C4.07278 11.6438 4.12892 11.7286 4.20014 11.7999C4.27136 11.8711 4.35619 11.9272 4.44958 11.9649C4.54297 12.0027 4.643 12.0212 4.7437 12.0194C4.8444 12.0176 4.94372 11.9956 5.03572 11.9546C5.12771 11.9136 5.21052 11.8545 5.27918 11.7808L7.99918 9.06082L10.7192 11.7808C10.7878 11.8545 10.8706 11.9136 10.9626 11.9546C11.0546 11.9956 11.154 12.0176 11.2547 12.0194C11.3554 12.0212 11.4554 12.0027 11.5488 11.9649C11.6422 11.9272 11.727 11.8711 11.7982 11.7999C11.8694 11.7286 11.9256 11.6438 11.9633 11.5504C12.001 11.457 12.0195 11.357 12.0178 11.2563C12.016 11.1556 11.9939 11.0563 11.953 10.9643C11.912 10.8723 11.8529 10.7895 11.7792 10.7208L9.05918 8.00082L11.7792 5.28082C11.9117 5.13865 11.9838 4.9506 11.9804 4.7563C11.9769 4.562 11.8982 4.37661 11.7608 4.2392C11.6234 4.10179 11.438 4.02308 11.2437 4.01965C11.0494 4.01622 10.8614 4.08834 10.7192 4.22082L7.99918 6.94082L5.27918 4.22082Z"
        fill="#737373"
      />
    </svg>
  </button>
)

type Props = {
  onClose: VoidFunction
}

export function EarnPoints({ onClose }: Props) {
  const locale = useLocale()

  const image = imageMap[locale]

  return (
    <div className="group/card-image rounded-xl border border-solid border-neutral-300/55 bg-white shadow-md">
      <div className="p-[6px]">
        <div className="relative overflow-hidden rounded-lg">
          <Image
            alt="Earn points card"
            className="object-contain"
            height={152}
            src={image}
            width={466}
          />
          <div className="bg-earnpoints-hover pointer-events-none absolute inset-0 rounded-lg opacity-0 transition duration-300 group-hover/card-image:opacity-[0.5]" />
        </div>
        <div className="flex items-center justify-center pt-1">
          <PoweredAbsinthe />
        </div>
      </div>
      <CloseButton
        onClick={function (e) {
          e.preventDefault()
          e.stopPropagation()
          onClose()
        }}
      />
    </div>
  )
}
